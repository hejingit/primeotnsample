DROP TABLE CAP_PARTYAUTH;
DROP TABLE CAP_RESAUTH;
DROP TABLE CAP_ROLE;
DROP TABLE COMP_IP_ACCESS_RULES;
DROP TABLE COMP_WIN7_AUTO_START;
DROP TABLE COMP_WIN7_CONFIG;
DROP TABLE COMP_WIN7_CUSTOM_PICTURES;
DROP TABLE COMP_WIN7_ICONS;
DROP TABLE APP_FUNCRESOURCE;
DROP TABLE APP_FUNCTION;
DROP TABLE APP_FUNCGROUP;
DROP TABLE APP_APPLICATION;
DROP TABLE APP_MENU;
DROP TABLE CAP_SSOUSER;
DROP TABLE CAP_USER;
DROP TABLE ORG_EMPORG;
DROP TABLE ORG_EMPPOSITION;
DROP TABLE ORG_EMPGROUP;
DROP TABLE ORG_EMPLOYEE;
DROP TABLE ORG_GROUP;
DROP TABLE ORG_GROUPPOSI;
DROP TABLE ORG_POSITION;
DROP TABLE ORG_DUTY;
DROP TABLE ORG_ORGANIZATION;
DROP TABLE ORG_RECENT_VISIT;


CREATE TABLE CAP_RESAUTH (	
	PARTY_ID VARCHAR(64) NOT NULL,
	PARTY_TYPE VARCHAR(64) NOT NULL,
	RES_ID VARCHAR(255) NOT NULL,
	RES_TYPE VARCHAR(64) NOT NULL,
	TENANT_ID VARCHAR(64),
	RES_STATE VARCHAR(512) NOT NULL,
	PARTY_SCOPE VARCHAR(1) DEFAULT '0',
	CREATEUSER VARCHAR(64),
	CREATETIME TIMESTAMP,
	PRIMARY KEY (PARTY_ID,	PARTY_TYPE,	RES_ID,	RES_TYPE)); 
CREATE TABLE CAP_ROLE (
	ROLE_ID VARCHAR(64) NOT NULL,
	TENANT_ID VARCHAR(64) NOT NULL,
	ROLE_CODE VARCHAR(64) NOT NULL,
	ROLE_NAME VARCHAR(64),
	ROLE_DESC VARCHAR(255),
	CREATEUSER VARCHAR(64),
	CREATETIME TIMESTAMP,
	PRIMARY KEY (ROLE_ID)); 
CREATE TABLE COMP_IP_ACCESS_RULES (
	RULES_ID VARCHAR(255) NOT NULL,
	START_IP VARCHAR(255),
	END_IP VARCHAR(255),
	RULES_TYPE VARCHAR(255),
	REMARK VARCHAR(255),
	MAKERS_ID VARCHAR(255),
	ADD_DATE VARCHAR(255),
	ENABLED VARCHAR(255),
	PRIMARY KEY (RULES_ID)); 
CREATE TABLE COMP_WIN7_AUTO_START (
	START_ID VARCHAR(255) NOT NULL,
	MENU_ID VARCHAR(255),
	START_DESC VARCHAR(255),
	USER_ID VARCHAR(255),
	PRIMARY KEY (START_ID)); 
CREATE TABLE COMP_WIN7_CONFIG (
	CONFIG_ID VARCHAR(255) NOT NULL,
	BG_PICTURE_PATH VARCHAR(255),
	USER_ID VARCHAR(255),
	CONFIG_DATA CLOB(102400),
	OPEN_TYPE VARCHAR(255),
	DEFAULT_MAX SMALLINT,
	DEFAULT_WIDTH INTEGER,
	DEFAULT_HEIGHT INTEGER,
	DESK_STYLE VARCHAR(255),
	EXT1 VARCHAR(255),
	EXT2 VARCHAR(255),
	EXT3 VARCHAR(255),
	PRIMARY KEY (CONFIG_ID)); 
CREATE TABLE COMP_WIN7_CUSTOM_PICTURES (
	CUSTOM_ID VARCHAR(255) NOT NULL,
	FILE_NAME VARCHAR(255),
	USER_ID VARCHAR(255),
	UPLOAD_TIME VARCHAR(255),
	PRIMARY KEY (CUSTOM_ID)); 
CREATE TABLE COMP_WIN7_ICONS (
	ICON_ID VARCHAR(255) NOT NULL,
	ICON_NAME VARCHAR(255),
	ICON_TEXT VARCHAR(255),
	ICON_PATH VARCHAR(255),
	ICON_TITLE VARCHAR(255),
	MENU_ID VARCHAR(255),
	ICON_INDEX VARCHAR(255),
	ICON_DESC VARCHAR(255),
	USER_ID VARCHAR(255),
	PRIMARY KEY (ICON_ID)); 
CREATE TABLE APP_APPLICATION (
	APPID NUMERIC(10,0) NOT NULL,
	APPCODE VARCHAR(32),
	APPNAME VARCHAR(50),
	APPTYPE VARCHAR(255),
	ISOPEN VARCHAR(1),
	OPENDATE DATE,
	URL VARCHAR(256),
	APPDESC VARCHAR(512),
	MAINTENANCE NUMERIC(10,0),
	MANAROLE VARCHAR(64),
	DEMO VARCHAR(512),
	INIWP VARCHAR(1),
	INTASKCENTER VARCHAR(1),
	IPADDR VARCHAR(50),
	IPPORT VARCHAR(10),
	APP_ID VARCHAR(64),
	TENANT_ID VARCHAR(64) NOT NULL,
	PROTOCOL_TYPE VARCHAR(64),
	PRIMARY KEY (APPID)); 
CREATE TABLE APP_FUNCGROUP (
	FUNCGROUPID NUMERIC(10,0) NOT NULL,
	FUNCGROUPNAME VARCHAR(40),
	GROUPLEVEL INTEGER,
	FUNCGROUPSEQ VARCHAR(256),
	ISLEAF VARCHAR(1),
	SUBCOUNT NUMERIC(10,0),
	APP_ID VARCHAR(64),
	TENANT_ID VARCHAR(64) NOT NULL,
	PARENTGROUP NUMERIC(10,0),
	APPID NUMERIC(10,0) NOT NULL,
	PRIMARY KEY (FUNCGROUPID)); 
CREATE TABLE APP_FUNCRESOURCE (
	RESID NUMERIC(10,0) NOT NULL,
	RESTYPE VARCHAR(255),
	RESPATH VARCHAR(256),
	COMPACKNAME VARCHAR(40),
	RESNAME VARCHAR(40),
	APP_ID VARCHAR(64),
	TENANT_ID VARCHAR(64) NOT NULL,
	FUNCCODE VARCHAR(255),
	PRIMARY KEY (RESID)); 
CREATE TABLE APP_FUNCTION (
	FUNCCODE VARCHAR(255) NOT NULL,
	FUNCNAME VARCHAR(128) NOT NULL,
	FUNCDESC VARCHAR(512),
	FUNCACTION VARCHAR(256),
	PARAINFO VARCHAR(256),
	ISCHECK VARCHAR(1),
	FUNCTYPE VARCHAR(255) DEFAULT '1',
	ISMENU VARCHAR(1),
	APP_ID VARCHAR(64),
	TENANT_ID VARCHAR(64) NOT NULL,
	FUNCGROUPID NUMERIC(10,0),
	PRIMARY KEY (FUNCCODE)); 
CREATE TABLE APP_MENU (
	MENUID VARCHAR(40) NOT NULL,
	MENUNAME VARCHAR(40) NOT NULL,
	MENULABEL VARCHAR(40) NOT NULL,
	MENUCODE VARCHAR(40),
	ISLEAF VARCHAR(1),
	PARAMETER VARCHAR(256),
	UIENTRY VARCHAR(256),
	MENULEVEL SMALLINT,
	ROOTID VARCHAR(40),
	DISPLAYORDER SMALLINT,
	IMAGEPATH VARCHAR(100),
	EXPANDPATH VARCHAR(100),
	MENUSEQ VARCHAR(256),
	OPENMODE VARCHAR(255),
	SUBCOUNT NUMERIC(10,0),
	APPID NUMERIC(10,0),
	FUNCCODE VARCHAR(255),
	APP_ID VARCHAR(64),
	TENANT_ID VARCHAR(64) NOT NULL,
	PARENTSID VARCHAR(40),
	PRIMARY KEY (MENUID)); 
CREATE TABLE CAP_PARTYAUTH (
	ROLE_TYPE VARCHAR(64) NOT NULL,
	PARTY_ID VARCHAR(64) NOT NULL,
	PARTY_TYPE VARCHAR(64) NOT NULL,
	ROLE_ID VARCHAR(64) NOT NULL,
	TENANT_ID VARCHAR(64) NOT NULL,
	CREATEUSER VARCHAR(64),
	CREATETIME TIMESTAMP NOT NULL,
	PRIMARY KEY (ROLE_TYPE,	PARTY_ID,PARTY_TYPE,ROLE_ID)); 
CREATE TABLE CAP_SSOUSER (
	OPERATOR_ID VARCHAR(64) NOT NULL,
	TENANT_ID VARCHAR(64),
	USER_ID VARCHAR(64) NOT NULL,
	PASSWORD VARCHAR(100),
	USER_NAME VARCHAR(64),
	EMAIL VARCHAR(128),
	STATUS VARCHAR(16),
	UNLOCKTIME TIMESTAMP,
	LASTLOGIN TIMESTAMP NOT NULL,
	ERRCOUNT NUMERIC(10,0),
	MACCODE VARCHAR(255),
	IPADDRESS VARCHAR(255),
	CREATEUSER VARCHAR(64),
	CREATETIME TIMESTAMP NOT NULL,
	PRIMARY KEY (OPERATOR_ID)); 
CREATE TABLE CAP_USER (
	OPERATOR_ID NUMERIC(18,0) NOT NULL,
	TENANT_ID VARCHAR(64) NOT NULL,
	USER_ID VARCHAR(64) NOT NULL,
	PASSWORD VARCHAR(100),
	INVALDATE DATE,
	USER_NAME VARCHAR(64),
	AUTHMODE VARCHAR(255),
	STATUS VARCHAR(16),
	UNLOCKTIME TIMESTAMP NOT NULL,
	MENUTYPE VARCHAR(255),
	LASTLOGIN TIMESTAMP NOT NULL,
	ERRCOUNT NUMERIC(10,0),
	STARTDATE DATE,
	ENDDATE DATE,
	VALIDTIME VARCHAR(255),
	MACCODE VARCHAR(128),
	IPADDRESS VARCHAR(128),
	EMAIL VARCHAR(255),
	CREATEUSER VARCHAR(64),
	CREATETIME TIMESTAMP NOT NULL,
	PRIMARY KEY (OPERATOR_ID)); 
CREATE TABLE ORG_DUTY (
	DUTYID NUMERIC(10,0) NOT NULL,
	DUTYCODE VARCHAR(20),
	DUTYNAME VARCHAR(30),
	PARENTDUTY NUMERIC(10,0),
	DUTYLEVEL INTEGER,
	DUTYSEQ VARCHAR(256),
	DUTYTYPE VARCHAR(255),
	ISLEAF VARCHAR(10),
	SUBCOUNT NUMERIC(10,0),
	REMARK VARCHAR(256),
	TENANT_ID VARCHAR(64) NOT NULL,
	APP_ID VARCHAR(64),
	PRIMARY KEY (DUTYID)); 
CREATE TABLE ORG_EMPGROUP (
	GROUPID NUMERIC(10,0) NOT NULL,
	EMPID NUMERIC(10,0) NOT NULL,
	ISMAIN VARCHAR(1),
	TENANT_ID VARCHAR(64) NOT NULL,
	APP_ID VARCHAR(64),
	PRIMARY KEY (GROUPID,EMPID)); 
CREATE TABLE ORG_EMPLOYEE (
	EMPID NUMERIC(10,0) NOT NULL,
	EMPCODE VARCHAR(30),
	OPERATORID NUMERIC(18,0),
	USERID VARCHAR(30),
	EMPNAME VARCHAR(50),
	REALNAME VARCHAR(50),
	GENDER VARCHAR(255),
	BIRTHDATE DATE,
	POSITION NUMERIC(10,0),
	EMPSTATUS VARCHAR(255),
	CARDTYPE VARCHAR(255),
	CARDNO VARCHAR(20),
	INDATE DATE,
	OUTDATE DATE,
	OTEL VARCHAR(12),
	OADDRESS VARCHAR(255),
	OZIPCODE VARCHAR(10),
	OEMAIL VARCHAR(128),
	FAXNO VARCHAR(14),
	MOBILENO VARCHAR(14),
	QQ VARCHAR(16),
	HTEL VARCHAR(12),
	HADDRESS VARCHAR(128),
	HZIPCODE VARCHAR(10),
	PEMAIL VARCHAR(128),
	PARTY VARCHAR(255),
	DEGREE VARCHAR(255),
	MAJOR NUMERIC(10,0),
	SORTNO INTEGER,
	SPECIALTY VARCHAR(1024),
	WORKEXP VARCHAR(512),
	REGDATE DATE,
	CREATETIME DATE NOT NULL,
	LASTMODYTIME DATE NOT NULL,
	ORGIDLIST VARCHAR(128),
	ORGID NUMERIC(10,0),
	REMARK VARCHAR(512),
	TENANT_ID VARCHAR(64) NOT NULL,
	APP_ID VARCHAR(64),
	WEIBO VARCHAR(255),
	PRIMARY KEY (EMPID)); 
CREATE TABLE ORG_EMPORG (
	ORGID NUMERIC(10,0) NOT NULL,
	EMPID NUMERIC(10,0) NOT NULL,
	ISMAIN VARCHAR(1),
	TENANT_ID VARCHAR(64) NOT NULL,
	APP_ID VARCHAR(64),
	PRIMARY KEY (ORGID,	EMPID)); 
CREATE TABLE ORG_EMPPOSITION (
	POSITIONID NUMERIC(10,0) NOT NULL,
	EMPID NUMERIC(10,0) NOT NULL,
	ISMAIN VARCHAR(1),
	TENANT_ID VARCHAR(64) NOT NULL,
	APP_ID VARCHAR(64),
	PRIMARY KEY (POSITIONID,EMPID)); 
CREATE TABLE ORG_GROUP (
	GROUPID NUMERIC(10,0) NOT NULL,
	ORGID NUMERIC(10,0),
	GROUPLEVEL INTEGER,
	GROUPNAME VARCHAR(50),
	GROUPDESC VARCHAR(512),
	GROUPTYPE VARCHAR(255),
	GROUPSEQ VARCHAR(256),
	STARTDATE DATE,
	ENDDATE DATE,
	GROUPSTATUS VARCHAR(255),
	MANAGER VARCHAR(30),
	CREATETIME TIMESTAMP NOT NULL,
	LASTUPDATE DATE,
	UPDATOR NUMERIC(10,0),
	ISLEAF VARCHAR(1),
	SUBCOUNT NUMERIC(10,0),
	TENANT_ID VARCHAR(64) NOT NULL,
	APP_ID VARCHAR(64),
	PARENTGROUPID NUMERIC(10,0),
	PRIMARY KEY (GROUPID)); 
CREATE TABLE ORG_GROUPPOSI (
	GROUPID NUMERIC(10,0) NOT NULL,
	POSITIONID NUMERIC(10,0) NOT NULL,
	ISMAIN VARCHAR(1),
	TENANT_ID VARCHAR(64) NOT NULL,
	APP_ID VARCHAR(64),
	PRIMARY KEY (GROUPID,POSITIONID)); 
CREATE TABLE ORG_ORGANIZATION (
	ORGID NUMERIC(10,0) NOT NULL,
	ORGCODE VARCHAR(32) NOT NULL,
	ORGNAME VARCHAR(64),
	ORGLEVEL NUMERIC(2,0) DEFAULT 1,
	ORGDEGREE VARCHAR(255),
	ORGSEQ VARCHAR(512),
	ORGTYPE VARCHAR(12),
	ORGADDR VARCHAR(256),
	ZIPCODE VARCHAR(10),
	MANAPOSITION NUMERIC(10,0),
	MANAGERID NUMERIC(10,0),
	ORGMANAGER VARCHAR(128),
	LINKMAN VARCHAR(30),
	LINKTEL VARCHAR(20),
	EMAIL VARCHAR(128),
	WEBURL VARCHAR(512),
	STARTDATE DATE,
	ENDDATE DATE,
	STATUS VARCHAR(255),
	AREA VARCHAR(30),
	CREATETIME TIMESTAMP NOT NULL,
	LASTUPDATE TIMESTAMP NOT NULL,
	UPDATOR NUMERIC(10,0),
	SORTNO INTEGER,
	ISLEAF VARCHAR(1),
	SUBCOUNT NUMERIC(10,0),
	REMARK VARCHAR(512),
	TENANT_ID VARCHAR(64) NOT NULL,
	APP_ID VARCHAR(64),
	PARENTORGID NUMERIC(10,0),
	PRIMARY KEY (ORGID)); 
CREATE TABLE ORG_POSITION (
	POSITIONID NUMERIC(10,0) NOT NULL,
	POSICODE VARCHAR(20),
	POSINAME VARCHAR(128) NOT NULL,
	POSILEVEL NUMERIC(2,0),
	POSITIONSEQ VARCHAR(512) NOT NULL,
	POSITYPE VARCHAR(255),
	CREATETIME DATE NOT NULL,
	LASTUPDATE DATE NOT NULL,
	UPDATOR NUMERIC(10,0),
	STARTDATE DATE,
	ENDDATE DATE,
	STATUS VARCHAR(255),
	ISLEAF VARCHAR(1),
	SUBCOUNT NUMERIC(10,0),
	TENANT_ID VARCHAR(64) NOT NULL,
	APP_ID VARCHAR(64),
	DUTYID NUMERIC(10,0),
	MANAPOSI NUMERIC(10,0),
	ORGID NUMERIC(10,0),
	PRIMARY KEY (POSITIONID)); 
CREATE TABLE ORG_RECENT_VISIT (
	ID VARCHAR(32) NOT NULL,
	TARGET_ID VARCHAR(32) NOT NULL,
	USERID VARCHAR(32) NOT NULL,
	FREQUENCY INTEGER DEFAULT 1 NOT NULL,
	LASTTIME TIMESTAMP NOT NULL,
	TARGET_TYPE VARCHAR(32) NOT NULL,
	PRIMARY KEY (ID)); 

/*==============================================================*/
/* TABLE: CAP_RULEAUTH                                          */
/*==============================================================*/
DROP TABLE CAP_RULEAUTH;
CREATE TABLE CAP_RULEAUTH (
	RULEAUTH_ID VARCHAR(64) NOT NULL,
	TENANT_ID VARCHAR(64) NOT NULL,
	RULE_ID VARCHAR(64) NOT NULL,
	RES_ID VARCHAR(255) NOT NULL,
	RES_TYPE VARCHAR(64) NOT NULL,
	RES_STATE VARCHAR(512) NOT NULL,
	CREATEUSER VARCHAR(64),
	CREATETIME TIMESTAMP,
	PRIMARY KEY (RULEAUTH_ID));
CREATE INDEX IDX_CAP_RULEAUTH_RULE_ID ON CAP_RULEAUTH(RULE_ID);

DROP TABLE CAP_RULE;
CREATE TABLE CAP_RULE (
	RULE_ID VARCHAR(64) DEFAULT '' NOT NULL,
	RULE_NAME VARCHAR(64) DEFAULT '' NOT NULL,
	TENANT_ID VARCHAR(64) DEFAULT '' NOT NULL,
	RULE_TYPE VARCHAR(64) DEFAULT '' NOT NULL,
	NAMESPACE VARCHAR(512) DEFAULT '' NOT NULL,
	RULE_EXPRESSION BLOB(65535),
	CREATEUSER VARCHAR(64),
	CREATETIME DATE,
	PRIMARY KEY (RULE_ID)); 
